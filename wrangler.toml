name = "d5-upload-works"
main = "src/index.ts"
compatibility_date = "2024-11-01"

# Workers KV 命名空间绑定
[[kv_namespaces]]
binding = "MY_KV"
id = "d4b3d057d14c407c881a400de15514a0"
preview_id = "1c75ff4ae0e24433a9b0913041feae0f"

# Durable Objects 绑定
[[durable_objects.bindings]]
name = "VOTE_COUNTER"
class_name = "VoteCounter"
# script_name 可以省略，默认使用当前脚本名称

# Durable Objects 迁移配置
# 免费计划需要使用 new_sqlite_classes 而不是 new_classes
[[migrations]]
tag = "v1"
new_sqlite_classes = ["VoteCounter"]

# 环境变量（开发环境使用 .dev.vars，生产环境使用 wrangler secret）
# 生产环境配置密钥：
# npx wrangler secret put ALIYUN_OSS_ACCESS_KEY_ID
# npx wrangler secret put ALIYUN_OSS_ACCESS_KEY_SECRET
# npx wrangler secret put ALIYUN_OSS_REGION
# npx wrangler secret put ALIYUN_OSS_BUCKET
# npx wrangler secret put DINGTALK_APP_KEY
# npx wrangler secret put DINGTALK_APP_SECRET
# npx wrangler secret put DINGTALK_REDIRECT_URI
# npx wrangler secret put SESSION_SECRET
# npx wrangler secret put ADMIN_PASSWORD

# 路由配置（自定义域名）
# 如果需要保留远程的自定义域名，取消下面的注释
# routes = [
#   { pattern = "227811.de5.net/*", zone_name = "227811.de5.net", custom_domain = true }
# ]
