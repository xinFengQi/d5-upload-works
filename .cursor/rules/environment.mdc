---
description: "环境变量配置规范（Node 服务端）"
globs:
  - "server/**/*.js"
  - "**/.env*"
  - "server/.env.example"
---

# 环境变量规范

## 配置位置
- 开发/生产均在 `server/.env` 中配置（不要提交到 Git）
- 参考 `server/.env.example` 复制并填写

## 必需变量

### 阿里云 OSS
- `ALIYUN_OSS_ACCESS_KEY_ID`
- `ALIYUN_OSS_ACCESS_KEY_SECRET`
- `ALIYUN_OSS_REGION`
- `ALIYUN_OSS_BUCKET`

### 钉钉
- `DINGTALK_APP_KEY`
- `DINGTALK_APP_SECRET`
- `DINGTALK_REDIRECT_URI`

### 其他
- `ADMIN_PASSWORD`：管理员密码
- `PORT`：服务端口，默认 3000
- `ENVIRONMENT`：可选，`development` | `production`

## 使用方式
- 在 `server/app.js` 中通过 `require('dotenv').config()` 加载
- 配置挂到 `req.app.locals.config`，路由与服务从该对象读取
- 禁止在代码中硬编码密钥；生产环境勿将 `.env` 提交仓库
