---
description: "TypeScript 代码规范、错误处理和响应格式标准"
alwaysApply: true
---

# 代码规范

## TypeScript 规范
- 使用严格的 TypeScript 配置
- 所有函数必须有明确的返回类型
- 使用接口定义数据结构
- 避免使用 `any` 类型
- 使用类型推断时确保类型明确

## 错误处理
- 使用统一的错误响应格式（通过 `createErrorResponse` 工具函数）
- 记录错误日志（使用 `console.error`）
- 不向客户端暴露敏感错误信息
- 错误信息应该清晰、可操作

## 响应格式
所有 API 响应必须使用统一的格式：

### 成功响应
```typescript
{
  success: true,
  data: {...}
}
```

### 错误响应
```typescript
{
  success: false,
  error: {
    message: "错误描述",
    code: "ERROR_CODE",
    details?: {...}
  }
}
```

使用 `src/utils/response.ts` 中的工具函数：
- `createSuccessResponse<T>(data: T, status?: number)`
- `createErrorResponse(message: string, code: string, status?: number, details?: any)`
- `createPaginatedResponse<T>(items: T[], total: number, page: number, limit: number)`

## 代码组织
- 按功能模块组织代码
- 保持函数单一职责
- 提取可复用的工具函数
- 添加必要的注释（中文）
- 使用有意义的变量和函数名

## 文件命名规范
- 使用 kebab-case 命名文件和目录
- TypeScript 文件使用 `.ts` 扩展名
- 类型定义文件使用 `.ts` 扩展名

## Git 规范
- 提交信息使用中文
- 使用有意义的提交信息
- 不要提交 `.dev.vars` 文件
- 不要提交 `node_modules`
